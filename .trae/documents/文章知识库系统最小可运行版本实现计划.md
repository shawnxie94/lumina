# 文章知识库系统 - 最小可运行版本实现计划

## 项目结构
```
article-database/
├── frontend/              # Next.js 前端应用
├── backend/               # FastAPI 后端服务
├── extension/             # WXT 浏览器扩展
├── docker-compose.yml     # Docker 编排配置
└── README.md             # 项目说明文档
```

## 实施步骤

### 1️⃣ 项目初始化
- 创建项目根目录结构
- 初始化前端 Next.js 项目（CSR模式）
- 初始化后端 FastAPI 项目
- 初始化浏览器扩展 WXT 项目

### 2️⃣ 后端开发
- **数据库层**：创建 SQLite 数据库和 SQLAlchemy 模型
  - Article 模型（文章表）
  - Category 模型（分类表）
  - AIAnalysis 模型（AI分析表）
  - AIConfig 模型（AI配置表）
- **AI集成**：实现极简 OpenAI 客户端
  - SimpleAIClient 类
  - 同步生成摘要功能
- **业务逻辑层**：ArticleService 服务
  - 创建文章并同步生成AI摘要
- **API层**：FastAPI 路由
  - POST /api/articles - 创建文章
  - GET /api/articles - 获取文章列表
  - GET /api/articles/{id} - 获取文章详情
  - GET /api/categories - 获取分类列表
  - POST /api/categories - 创建分类
  - DELETE /api/categories/{id} - 删除分类
  - POST /api/export - 导出文章

### 3️⃣ 前端开发
- **页面组件**：
  - 文章列表页（双栏布局）
  - 文章详情页（左右分栏）
  - 分类管理页
- **API集成**：调用后端 REST API
- **样式**：使用 Tailwind CSS

### 4️⃣ 浏览器扩展开发
- **内容采集**：使用 @mozilla/readability 提取页面内容
- **图片处理**：下载图片并转为 Base64
- **API调用**：调用后端创建文章接口

### 5️⃣ 部署配置
- **Docker Compose**：3个容器配置
  - web: 前端应用
  - api: 后端API
- **环境变量**：OPENAI_API_KEY 配置
- **数据持久化**：SQLite 数据卷

### 6️⃣ 文档和启动指南
- README.md：项目说明
- 快速启动指南
- 环境变量配置说明

## 技术栈
- **前端**：Next.js 14.x (CSR) + React 18.x + Tailwind CSS 3.x
- **后端**：FastAPI 0.104.x + SQLAlchemy 2.x + OpenAI 1.x
- **数据库**：SQLite 3.x
- **扩展**：WXT + @mozilla/readability
- **部署**：Docker Compose

## 预期成果
- ✅ 完整可运行的文章知识库系统
- ✅ 支持浏览器扩展采集文章
- ✅ 支持AI自动生成摘要
- ✅ 支持文章分类和导出
- ✅ 一键启动（docker-compose up）
- ✅ 月度成本 ¥250-650（节省80%）